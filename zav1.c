#include <stdio.h>  // Підключення стандартної бібліотеки для вводу/виводу

// Функція для обміну місцями лівої і правої половини кожного рядка матриці
void swapHalves(int rows, int cols, int a[rows][cols]) {
    int half = cols / 2;  // Знаходимо половину кількості стовпців
    for (int i = 0; i < rows; i++) {  // Проходимо по кожному рядку
        for (int j = 0; j < half; j++) {  // І по половині стовпців
            // Обмін елементів лівої і правої половини
            int temp = a[i][j];
            a[i][j] = a[i][j + half];
            a[i][j + half] = temp;
        }
    }
}

// Функція для введення елементів матриці з перевіркою введення
void inputMatrix(int rows, int cols, int a[rows][cols]) {
    printf("Введіть елементи матриці розміром %dx%d:\n", rows, cols);
    for (int i = 0; i < rows; i++) {  // Проходимо по рядках
        for (int j = 0; j < cols; j++) {  // І по стовпцях
            while (1) {  // Повторювати, поки не введено правильне число
                printf("a[%d][%d] = ", i, j);  // Запит значення елемента
                if (scanf("%d", &a[i][j]) == 1) break;  // Якщо число - вийти з циклу
                else {
                    printf("❌ Некоректне значення! Введіть ціле число.\n");
                    while (getchar() != '\n');  // Очищення буфера від неправильного вводу
                }
            }
        }
    }
}

// Функція для виведення матриці на екран
void printMatrix(int rows, int cols, int a[rows][cols]) {
    printf("Матриця:\n");
    for (int i = 0; i < rows; i++) {  // По рядках
        for (int j = 0; j < cols; j++) {  // По стовпцях
            printf("%4d", a[i][j]);  // Вивід елемента з відступом
        }
        printf("\n");  // Новий рядок після кожного рядка матриці
    }
}

int main() {
    const int rows = 3, cols = 4;  // Кількість рядків і стовпців (фіксовані)
    int matrix[rows][cols];  // Оголошення матриці
    int choice;  // Змінна для вибору користувача

    do {
        // Ввід елементів матриці
        inputMatrix(rows, cols, matrix);

        // Вивід початкової матриці
        printf("\nПочаткова матриця:\n");
        printMatrix(rows, cols, matrix);

        // Обмін половин
        swapHalves(rows, cols, matrix);

        // Вивід результату
        printf("\nМатриця після обміну лівої та правої половини:\n");
        printMatrix(rows, cols, matrix);

        // Пропозиція повторити або вийти
        printf("\n1 - Виконати ще раз\n0 - Вийти\nВаш вибір: ");
        while (scanf("%d", &choice) != 1) {  // Перевірка коректного введення
            printf("❌ Некоректне значення! Введіть 1 або 0: ");
            while (getchar() != '\n');  // Очищення буфера
        }

    } while (choice == 1);  // Повторювати, якщо вибір = 1

    printf("Завершення програми.\n");  // Повідомлення про завершення
    return 0;  // Успішне завершення програми
}
